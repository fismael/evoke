import{createElementBlock as d,openBlock as c,createElementVNode as n,toDisplayString as q,Fragment as $,renderList as x,ref as p,onMounted as P,createVNode as b,Transition as A,withCtx as O,createBlock as h,unref as k,createApp as I}from"vue";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();const g=(e,r)=>{const i=e.__vccOpts||e;for(const[u,t]of r)i[u]=t;return i},N="/evoke/assets/logo-BPxR3W9J.png",j={},E={class:"app-welcome"};function Q(e,r){return c(),d("div",E,r[0]||(r[0]=[n("h1",null,"Bienvenido al Creador de Perfumes",-1),n("p",null,"Te haremos una serie de preguntas para entender mejor el tipo de perfume que deseas crear.",-1),n("p",null,"Con tus respuestas, diseñaremos una combinación única de ingredientes que refleje tu estilo y personalidad.",-1),n("img",{src:N,alt:"logo"},null,-1)]))}const T=g(j,[["render",Q],["__scopeId","data-v-017affc1"]]),L={class:"question-container"},z={class:"question-image"},M=["src","alt"],R={class:"options"},_=["id","value","name","checked","onChange"],B=["for"],F={key:1,class:"text-input"},D=["value"],H={class:"navigation"},U=["disabled"],V=["disabled"],W={__name:"QuestionContainer",props:{questions:{type:Array,required:!0},currentStep:{type:Number,required:!0},answers:{type:Object,required:!0}},emits:["update:answers","next","previous"],setup(e,{emit:r}){const i=e,u=r,t=(s,o)=>{u("update:answers",{...i.answers,[s]:o})};return(s,o)=>(c(),d("div",L,[n("h2",null,q(e.questions[e.currentStep].question)+" *",1),n("div",z,[n("img",{src:e.questions[e.currentStep].image,alt:e.questions[e.currentStep].question},null,8,M)]),n("div",R,[e.questions[e.currentStep].options.length>0?(c(!0),d($,{key:0},x(e.questions[e.currentStep].options,a=>(c(),d("div",{key:a,class:"option"},[n("input",{type:"radio",id:a,value:a,name:e.questions[e.currentStep].key,checked:e.answers[e.questions[e.currentStep].key]===a,onChange:m=>t(e.questions[e.currentStep].key,a),required:""},null,40,_),n("label",{for:a},q(a),9,B)]))),128)):(c(),d("div",F,[n("input",{type:"text",value:e.answers[e.questions[e.currentStep].key]||"",onInput:o[0]||(o[0]=a=>t(e.questions[e.currentStep].key,a.target.value)),placeholder:"Escribe tu respuesta aquí... (requerido)",class:"text-field",required:""},null,40,D)]))]),n("div",H,[n("button",{onClick:o[1]||(o[1]=a=>s.$emit("previous")),disabled:e.currentStep===0,class:"nav-button"}," Anterior ",8,U),n("button",{onClick:o[2]||(o[2]=a=>s.$emit("next")),disabled:!e.answers[e.questions[e.currentStep].key],class:"nav-button"}," Siguiente ",8,V)])]))}},J=g(W,[["__scopeId","data-v-cb050c7c"]]),G={class:"perfume-results"},K={key:0,class:"loading"},Z={key:1,class:"error"},X={key:2,class:"ingredients"},Y=["innerHTML"],ee={__name:"PerfumeResults",props:{answers:{type:Object,required:!0},questions:{type:Array,required:!0}},emits:["restart"],setup(e,{emit:r}){const i=e,u=p(!0),t=p(""),s=p(null),o=m=>m.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>"),a=async()=>{try{u.value=!0,s.value=null;const l=`Con base en las siguientes respuestas, recomiende una receta de perfume con ingredientes específicos y sus proporciones. 
    Céntrese en ingredientes naturales y aceites esenciales. Incluya notas de fondo, notas medias y notas de salida. 
    Además, proporcione una breve explicación de por qué se eligieron estos ingredientes. Usar un formato super amigable para un usuario de 10 años.
    Use ** para resaltar palabras importantes como nombres de ingredientes, proporciones y términos técnicos usar mas emojis.

Respuestas:
${Object.entries(i.answers).map(([w,C])=>`${i.questions.find(S=>S.key===w).question}: ${C}`).join(`
`)}`,f=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent",{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":"AIzaSyDJpsx-HkUNNXZhsBWZ0BYe7mNGFedpA1s"},body:JSON.stringify({contents:[{parts:[{text:l}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}})});if(!f.ok)throw new Error("Failed to get perfume recommendation");const v=await f.json();t.value=o(v.candidates[0].content.parts[0].text)}catch(m){s.value=m.message}finally{u.value=!1}};return P(()=>{a()}),(m,l)=>(c(),d("div",G,[l[3]||(l[3]=n("h2",null,"Tu Perfume Personalizado",-1)),u.value?(c(),d("div",K,l[1]||(l[1]=[n("div",{class:"spinner"},null,-1),n("p",null,"Creando tu perfume personalizado...",-1)]))):s.value?(c(),d("div",Z,[l[2]||(l[2]=n("p",null,"Lo sentimos, hubo un error al generar tu perfume. Por favor, intenta de nuevo.",-1)),n("button",{onClick:a,class:"retry-button"}," Intentar de nuevo ")])):(c(),d("div",X,[n("div",{class:"ingredients-content",innerHTML:t.value},null,8,Y),n("button",{onClick:l[0]||(l[0]=f=>m.$emit("restart")),class:"restart-button"}," Comenzar de nuevo ")]))]))}},te=g(ee,[["__scopeId","data-v-903af67b"]]),y=[{key:"gender",question:"¿Para quién es el perfume?",options:["Hombre","Mujer","Unisex"],image:"../src/assets/gender.png"},{key:"personality",question:"¿Cómo describirías la personalidad de quien usará el perfume?",options:["Elegante","Extrovertido","Romántico","Misterioso","Aventurero","Minimalista"],image:"../src/assets/personality.png"},{key:"season",question:"¿En qué estación del año se usará principalmente?",options:["Primavera","Verano","Otoño","Invierno"],image:"../src/assets/season.png"},{key:"daytime",question:"¿Será un perfume para usar de día o de noche?",options:["Día","Noche","Ambos"],image:"../src/assets/daytime.png"},{key:"occasion",question:"¿Qué tipo de ocasión quieres cubrir?",options:["Diario","Oficial/Formal","Citas románticas","Eventos especiales","Vacaciones"],image:"../src/assets/occasion.png"},{key:"notes",question:"¿Qué tipos de aromas te gustan más?",options:["Cítricas","Florales","Amaderadas","Orientales","Dulces/Gourmand","Verdes/Frescas","Especiadas"],image:"../src/assets/notes.webp"},{key:"intensity",question:"¿Qué intensidad prefieres?",options:["Suave","Moderada","Intensa"],image:"../src/assets/intensity.png"},{key:"concept",question:"¿Hay algún concepto, imagen o inspiración que te gustaría que represente el perfume?",options:[],image:"../src/assets/concept.png"}],se={class:"wrapper"},ne={key:0,class:"welcome-screen"},re={__name:"App",setup(e){const r=p(0),i=p({}),u=p(!0),t=p(!1),s=()=>{u.value=!1},o=()=>{r.value<y.length-1?r.value++:t.value=!0},a=()=>{r.value>0&&r.value--},m=()=>{u.value=!0,r.value=0,i.value={},t.value=!1};return(l,f)=>(c(),d("div",se,[b(A,{name:"fade",mode:"out-in"},{default:O(()=>[u.value?(c(),d("div",ne,[b(T),n("button",{onClick:s,class:"start-button"}," Comenzar Quiz ")])):t.value?(c(),h(te,{key:2,answers:i.value,questions:k(y),onRestart:m},null,8,["answers","questions"])):(c(),h(J,{key:1,questions:k(y),"current-step":r.value,answers:i.value,"onUpdate:answers":f[0]||(f[0]=v=>i.value=v),onNext:o,onPrevious:a},null,8,["questions","current-step","answers"]))]),_:1})]))}},oe=g(re,[["__scopeId","data-v-4fbb9dc5"]]);I(oe).mount("#app");
